<!DOCTYPE html>  <html> <head>   <title>dombuilder.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               dombuilder.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p><strong><a href="http://github.com/skyzyx/dombuilder/">DOMBuilder</a></strong> is a tiny JavaScript class for generating DOM nodes
on-the-fly. It is designed around a few basic goals:</p>

<ul>
<li>Remove the <em>suck</em> from using JavaScript's <a href="https://developer.mozilla.org/en/Gecko_DOM_Reference">DOM</a> methods.</li>
<li>Small and lightweight.</li>
<li>Chainable like crazy.</li>
<li>Easy to embed into other, larger projects.</li>
<li>Doesn't <em>require</em> another framework, but plays well with <a href="http://prototypejs.org">Prototype</a>,
<a href="http://jquery.com">jQuery</a>, <a href="http://yuilibrary.com">YUI</a> and others.</li>
</ul>

<h2>Browser Support</h2>

<p>DOMBuilder has been <em>tested</em> in the following browsers:</p>

<ul>
<li><a href="http://firefox.com">Firefox</a> 3+</li>
<li><a href="http://apple.com/safari">Safari</a> 3+</li>
<li><a href="http://google.com/chrome">Chrome</a> 3+</li>
<li><a href="http://opera.com">Opera</a> 10.10+</li>
<li><a href="http://microsoft.com/ie">Internet Explorer</a> 6+</li>
</ul>

<p>The JavaScript used isn't all that complex, so I would expect that DOMBuilder <em>supports</em> other/older
browsers as well.</p>

<h2>License</h2>

<p>DOMBuilder is copyright (c) 2009-2011 Ryan Parman, and released for use under the open-source
<a href="http://opensource.org/licenses/bsd-license">3-clause BSD License</a>.</p>

<h2>Downloads</h2>

<p><em>(Right-click, and use "Save As")</em></p>

<table>
  <tr>
    <td><a href="http://github.com/skyzyx/dombuilder/raw/1.3/dombuilder.js">Development Version (1.3)</a></td>
    <td><i>16.8 kb, uncompressed with comments</i></td>
  </tr>
  <tr>
    <td><a href="http://github.com/skyzyx/dombuilder/raw/1.3/dombuilder.min.js">Production Version (1.3)</a></td>
    <td><i>794 bytes, packed and gzip compressed</i></td>
  </tr>
</table>             </td>             <td class="code">               <div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">## HTML to generate:</span>

<span class="cm">&lt;div id=&quot;test&quot; class=&quot;sample&quot;&gt;</span>
<span class="cm">    &lt;p&gt;This is a &lt;a href=&quot;&quot;&gt;sample of the code&lt;/a&gt; that you may like.&lt;/p&gt;</span>
<span class="cm">    &lt;p&gt;And another &lt;a href=&quot;#&quot;&gt;&lt;strong&gt;complex-ish&lt;/strong&gt;&lt;/a&gt; one.&lt;/p&gt;</span>
<span class="cm">    &lt;ul class=&quot;sample&quot;&gt;</span>
<span class="cm">        &lt;li&gt;&lt;a href=&quot;http://google.com&quot;&gt;One&lt;/a&gt;&lt;/li&gt;</span>
<span class="cm">        &lt;li&gt;&lt;em&gt;Two&lt;/em&gt;&lt;/li&gt;</span>
<span class="cm">        &lt;li&gt;&lt;strong&gt;Three&lt;/strong&gt;&lt;/li&gt;</span>
<span class="cm">    &lt;/ul&gt;</span>
<span class="cm">&lt;/div&gt;</span>


<span class="cm">## DOMBuilder code:</span>

<span class="cm">var _ = DOMBuilder,</span>
<span class="cm">    $body = document.body,</span>
<span class="cm">    $body.a = $body.appendChild;</span>

<span class="cm">$body.a(_.DOM(</span>
<span class="cm">    _(&#39;div#test.sample&#39;)._([</span>
<span class="cm">        _(&#39;p&#39;).H(&#39;This is a &lt;a href=&quot;&quot;&gt;sample of the code&lt;/a&gt; that you may like.&#39;),</span>
<span class="cm">        _(&#39;p&#39;).H(&#39;And another &lt;a href=&quot;#&quot;&gt;&lt;strong&gt;complex-ish&lt;/strong&gt;&lt;/a&gt; one.&#39;),</span>
<span class="cm">        _(&#39;ul.sample&#39;)._([</span>
<span class="cm">            _(&#39;li&#39;)._(_(&#39;a&#39;, { &#39;href&#39;:&#39;http://google.com&#39; }).html(&#39;One&#39;)),</span>
<span class="cm">            _(&#39;li&#39;)._(_(&#39;em&#39;).html(&#39;Two&#39;)),</span>
<span class="cm">            _(&#39;li&#39;)._(_(&#39;strong&#39;).html(&#39;Three&#39;))</span>
<span class="cm">        ])</span>
<span class="cm">    ])</span>
<span class="cm">));</span>
<span class="cm">*/</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h2>Digging into code</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Settings for Google Closure Compiler.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">==ClosureCompiler==</span>
<span class="cm">@compilation_level SIMPLE_OPTIMIZATIONS</span>
<span class="cm">==/ClosureCompiler==</span>
<span class="cm">*/</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Settings for JSLint or JSHint.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="cm">/*jslint white: false, onevar: true, browser: true, undef: true, nomen: false, eqeqeq: true, plusplus: false, bitwise: true, regexp: true, strict: false, newcap: true, immed: false */</span>
<span class="cm">/*global window */</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Do everything in a localized scope. We'll expose pieces to the global scope later.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <h2>DOMBuilder</h2>

<p>Accepts a string representation of a tag name for the element parameter, and a JSON hash of key-value
pairs for the attributes parameter. Returns a self-reference to this by default. Provides methods,
described below. You can easily shorten this function name by assigning it to a variable.</p>

<pre><code>// Assign to shorter variable
var _ = DOMBuilder,
    $body = document.body,
    $body.a = $body.appendChild;

$body.a(_.DOM(
    _('p', {
        'id':'abc',
        'class':['def', 'ghi']
    })
));

// or...

$body.a(_.DOM(
    _('p#abc.def.ghi')
));
</code></pre>

<p>This <code>X</code> variable will be exposed to the global scope as <code>DOMBuilder</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">X</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">attr</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Internally to DOMBuilder, we use very short variable names so that we can squeeze the file size
down as small as possible using YUI Compressor or Google Closure Compiler.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">_</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
            <span class="nx">d</span> <span class="o">=</span> <span class="nb">document</span><span class="p">,</span>
            <span class="nx">dotHashRe</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;[.#]&quot;</span><span class="p">),</span>
            <span class="nx">key</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Support CSS/jQuery-style notation for generating elements with IDs and classnames. (Internal-only!)</p>

<pre><code>div#myId
p#id.class1.class2
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">function</span> <span class="nx">notation</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span> <span class="p">{</span>

            <span class="kd">var</span> <span class="nx">attr</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;class&#39;</span><span class="o">:</span> <span class="p">[]</span> <span class="p">},</span>
                <span class="nx">dotHashRe</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;[.#]&quot;</span><span class="p">),</span>
                <span class="nx">piece</span><span class="p">,</span> <span class="nx">pieces</span><span class="p">,</span> <span class="nx">elemType</span><span class="p">,</span> <span class="nx">pos</span><span class="p">,</span> <span class="nx">classes</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">dotHashRe</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">elem</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">return</span> <span class="p">{};</span>
            <span class="p">}</span>

            <span class="nx">pieces</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="nx">dotHashRe</span><span class="p">);</span>
            <span class="nx">elemType</span> <span class="o">=</span> <span class="nx">pieces</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
            <span class="nx">pos</span> <span class="o">=</span> <span class="nx">elemType</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="nx">classes</span> <span class="o">=</span> <span class="nx">attr</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">];</span>

            <span class="k">for</span> <span class="p">(</span><span class="nx">piece</span> <span class="k">in</span> <span class="nx">pieces</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">pieces</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">piece</span><span class="p">))</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">elem</span><span class="p">[</span><span class="nx">pos</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;#&#39;</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">attr</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">pieces</span><span class="p">[</span><span class="nx">piece</span><span class="p">];</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">classes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pieces</span><span class="p">[</span><span class="nx">piece</span><span class="p">]);</span>
                    <span class="p">}</span>
                    <span class="nx">pos</span> <span class="o">+=</span> <span class="nx">pieces</span><span class="p">[</span><span class="nx">piece</span><span class="p">].</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="nx">attr</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">classes</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">attr</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">delete</span> <span class="nx">attr</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">];</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="nx">attr</span><span class="p">;</span>
        <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Merge the properties of one object with the properties of a second object. (Internal-only!)</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">function</span> <span class="nx">merge_options</span><span class="p">(</span><span class="nx">o1</span><span class="p">,</span> <span class="nx">o2</span><span class="p">)</span> <span class="p">{</span>

            <span class="kd">var</span> <span class="nx">o3</span> <span class="o">=</span> <span class="p">{},</span>
                <span class="nx">attrname</span><span class="p">;</span>

            <span class="k">for</span> <span class="p">(</span><span class="nx">attrname</span> <span class="k">in</span> <span class="nx">o1</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">o1</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">attrname</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">o3</span><span class="p">[</span><span class="nx">attrname</span><span class="p">]</span> <span class="o">=</span> <span class="nx">o1</span><span class="p">[</span><span class="nx">attrname</span><span class="p">];</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">for</span> <span class="p">(</span><span class="nx">attrname</span> <span class="k">in</span> <span class="nx">o2</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">o2</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">attrname</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">o3</span><span class="p">[</span><span class="nx">attrname</span><span class="p">]</span> <span class="o">=</span> <span class="nx">o2</span><span class="p">[</span><span class="nx">attrname</span><span class="p">];</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="nx">o3</span><span class="p">;</span>
        <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Merge options into a conglomo-hash!</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">attr</span> <span class="o">=</span> <span class="nx">merge_options</span><span class="p">(</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">notation</span><span class="p">(</span><span class="nx">elem</span><span class="p">));</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Construct the element, loop through the list of attributes and add them to the node. Because of
the way that IE works, class names need to be added explicitly via the <code>.className</code> property instead
of using <code>.setAttribute()</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">dotHashRe</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">elem</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">_</span><span class="p">.</span><span class="nx">e</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="nx">dotHashRe</span><span class="p">).</span><span class="nx">shift</span><span class="p">());</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="nx">_</span><span class="p">.</span><span class="nx">e</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">elem</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">attr</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="nx">key</span> <span class="k">in</span> <span class="nx">attr</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">attr</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">))</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">attr</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;object&#39;</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">attr</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">length</span> <span class="o">===</span> <span class="s1">&#39;number&#39;</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">attr</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">splice</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">attr</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">attr</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>
                    <span class="p">}</span>

                    <span class="k">if</span> <span class="p">(</span><span class="nx">key</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="o">===</span> <span class="s1">&#39;class&#39;</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">_</span><span class="p">.</span><span class="nx">e</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">attr</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">_</span><span class="p">.</span><span class="nx">e</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">attr</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <h3>.child() or ._()</h3>

<p>The <code>child()</code> method is used to add children to a parent node, or to add a new tag to a
text string. Accepts one or more child nodes in the form of a <code>DOMBuilder</code> object or a native
<code>HTMLElement</code> node (created with <code>document.createElement()</code>). Multiple child nodes are passed as an
array of objects. Returns a self-reference to <code>this</code> by default.</p>

<pre><code>// Assign to shorter variable
var _ = DOMBuilder,
    $body = document.body,
    $body.a = $body.appendChild;

$body.a(_.DOM(
    _('p#abc.def')._([
        _('strong').H('This is bold text.'),
        _('em').H('This is italic text.')
    ])
));
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">_</span><span class="p">.</span><span class="nx">child</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">_</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>If the object isn't an array, convert it to an array to maintain a single codepath below.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">obj</span> <span class="o">!==</span> <span class="s1">&#39;object&#39;</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">length</span> <span class="o">!==</span> <span class="s1">&#39;number&#39;</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">splice</span> <span class="o">!==</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">obj</span> <span class="o">=</span> <span class="p">[</span><span class="nx">obj</span><span class="p">];</span>
            <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Loop through the indexed array of children. If the node is a <code>DOMBuilder</code> object, convert it to
DOM and append it. Otherwise, assume it's a real DOM node.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">max</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">max</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">asDOM</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">_</span><span class="p">.</span><span class="nx">e</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">obj</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">asDOM</span><span class="p">());</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">_</span><span class="p">.</span><span class="nx">e</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">obj</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="nx">_</span><span class="p">;</span>
        <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <h3>.html() or .H()</h3>

<p>The <code>html()</code> method is used for adding text or HTML content to a node. Since it leverages <code>.innerHTML</code>
under the hood, you can pass a string of content to the text parameter. The default behavior is to
append content.</p>

<p>If you'd prefer to replace the existing <code>.innerHTML</code> content instead, pass a boolean <code>true</code> to the
<code>replace</code> parameter. Returns a self-reference to <code>this</code> by default.</p>

<p>Pass no parameters to read back the node as a string of HTML.</p>

<p>// Assign to shorter variable
 var _ = DOMBuilder,
     $body = document.body,
     $body.a = $body.appendChild;</p>

<p>$body.a(<em>.DOM(
     _('p#abc.def').</em>([
         _('strong').H('This is bold text.'),
         _('em').H('This is italic text.')
     ])
     .H('Replace the previous nodes with this text', true)
 ));</p>

<p><em>('p#abc.def').</em>([
     _('strong').H('This is bold text.'),
     _('em').H('This is italic text.')
 ]).html()</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">_</span><span class="p">.</span><span class="nx">html</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">H</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="nx">replace</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>No parameters? Read the value instead. Alias for asHTML().</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">asHTML</span><span class="p">();</span>
            <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Determine the default value for <code>replace</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">replace</span> <span class="o">=</span> <span class="nx">replace</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Set the value with innerHTML.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">replace</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">_</span><span class="p">.</span><span class="nx">e</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">str</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="nx">_</span><span class="p">.</span><span class="nx">e</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+=</span> <span class="nx">str</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="nx">_</span><span class="p">;</span>
        <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <h3>.text() or .T()</h3>

<p>The <code>text()</code> method is used for adding plain text content to a node. Since it leverages <code>.textContent</code>
or <code>.innerText</code> under the hood, you can pass a string of content to the text parameter. The default
behavior is to append content.</p>

<p>If you'd prefer to replace the existing content instead, pass a boolean <code>true</code> to the <code>replace</code>
parameter. Returns a self-reference to <code>this</code> by default.</p>

<p>Pass no parameters to read back the node as a string of plain text.</p>

<p>// Assign to shorter variable
 var _ = DOMBuilder,
     $body = document.body,
     $body.a = $body.appendChild;</p>

<p>$body.a(<em>.DOM(
     _('p#abc.def').</em>([
         _('strong').H('This is bold text.'),
         _('em').H('This is italic text.')
     ])
     .T('Replace the previous nodes with this text', true)
 ));</p>

<p><em>('p#abc.def').</em>([
     _('strong').H('This is bold text.'),
     _('em').H('This is italic text.')
 ]).text()</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">_</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">T</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>No parameters? Read the value instead. Alias for asText().</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">asText</span><span class="p">();</span>
            <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>Set the value</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">e</span><span class="p">.</span><span class="nx">innerText</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">_</span><span class="p">.</span><span class="nx">e</span><span class="p">.</span><span class="nx">innerText</span> <span class="o">=</span> <span class="nx">str</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="nx">str</span><span class="p">);</span>
                <span class="nx">_</span><span class="p">.</span><span class="nx">e</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="nx">_</span><span class="p">;</span>
        <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <h3>.asDOM() or .dom()</h3>

<p>Returns a real DOM node for use with the standard JavaScript DOM methods. When DOMBuilder objects
are passed to the child method, <code>asDOM()</code> is optional. It is only required when it's the last method
in the chain while being passed into a real JavaScript DOM node.</p>

<p>// Assign to shorter variable
 var _ = DOMBuilder,
     $body = document.body,
     $body.a = $body.appendChild;</p>

<p>$body.a(
     <em>('p#abc.def').</em>([
         _('strong').H('This is bold text.'),
         _('em').H('This is italic text.')
     ]).dom()
 );</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">_</span><span class="p">.</span><span class="nx">asDOM</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">dom</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

            <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">e</span><span class="p">;</span>
        <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <h3>.asHTML() or .html() or .H()</h3>

<p>Returns the DOM nodes as a string of HTML. It's as simple as that.</p>

<p>// Assign to shorter variable
 var _ = DOMBuilder;</p>

<p>var id = document.getElementById('id');
 id.innerHTML = _('p#abc.def').H('This is my text.').asHTML();</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">_</span><span class="p">.</span><span class="nx">asHTML</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

            <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
            <span class="nx">t</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">e</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">t</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">;</span>
        <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <h3>.asText() or .text() or .T()</h3>

<p>Returns the DOM nodes as a string of plain text. It's as simple as that.</p>

<p>// Assign to shorter variable
 var _ = DOMBuilder;</p>

<p>var id = document.getElementById('id');
 id.innerHTML = _('p#abc.def').H('This is my text.').asText();</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">_</span><span class="p">.</span><span class="nx">asText</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

            <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
            <span class="nx">t</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">e</span><span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">innerText</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">t</span><span class="p">.</span><span class="nx">innerText</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">textContent</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">t</span><span class="p">.</span><span class="nx">textContent</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">};</span>

        <span class="k">return</span> <span class="nx">_</span><span class="p">;</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <h2>Expose to the global scope</h2>

<p>Pre-instantiate the class on each call so that you never need to use <code>new</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nb">window</span><span class="p">.</span><span class="nx">DOMBuilder</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">attr</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">X</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">attr</span><span class="p">);</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <h2>DOM()</h2>

<p>This is the function that all other <code>DOMBuilder</code> nodes are passed into, as it returns directly into the
<code>appendChild()</code> method. For a single <code>DOMBuilder</code> chain, this is interchangable with the <code>.asDOM()</code>
method (although they're used differently).</p>

<p>If you are passing in multiple sibling nodes without a parent, <code>DOM()</code> leverages
<a href="http://ejohn.org/blog/dom-documentfragments/">Document Fragments</a> to substantially speed up the process
of writing multiple nodes to the live DOM.</p>

<p>// Assign to shorter variable
 var _ = DOMBuilder,
     $body = document.body,
     $body.a = $body.appendChild;</p>

<p>$body.a(_.DOM([
     _('p#abc.def').H('This is my text.'),
     _('p').H('Something simpler.'),
     _('p').H('Let\'s add a third paragraph, for kicks.')
 ]));</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nb">window</span><span class="p">.</span><span class="nx">DOMBuilder</span><span class="p">.</span><span class="nx">DOM</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">nodes</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Create a document fragment. Grab and loop through the in-memory DOM nodes, and <em>move</em> them to the
Document Fragment.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">(),</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">max</span><span class="p">,</span>
            <span class="nx">n</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">X</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">).</span><span class="nx">_</span><span class="p">(</span><span class="nx">nodes</span><span class="p">).</span><span class="nx">dom</span><span class="p">().</span><span class="nx">childNodes</span><span class="p">;</span>

        <span class="k">while</span> <span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">f</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Return the Document Fragment to the calling method (presumably <code>.appendChild()</code>).</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">return</span> <span class="nx">f</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">})();</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <h2>Change Log</h2>

<h3>1.3</h3>

<p>Added a number of shortcuts and niceties. Use <code>.dom()</code> as an alias for <code>.asDOM()</code>. Use <code>.html()</code> as an alias
for <code>.asHTML()</code>. Use <code>._()</code> as an alias for <code>.child()</code>. You can now pass an array of class names to the 'class'
hash attribute. You can also use CSS-style <code>#</code> and <code>.</code> notation for setting IDs and class names. Also now
supports <code>.text()</code> and <code>.asText()</code> for working with plain text nodes. Added support for using <code>.T()</code> and
<code>.H()</code> as shortcuts for <code>.text()</code> and <code>.html()</code>.</p>

<h3>1.2</h3>

<p>Added <code>.DOM()</code> as the primary way of passing real DOM nodes back; useful for appending multiple
nodes at once.</p>

<h3>1.1</h3>

<p>Simplified the code under the hood. Now runs a little faster and compresses even smaller. Removed the
need to instantiate the class, making it easier to alias. Ensured that it passed JSLint. Provided a
version minified by Google Closure Compiler.</p>

<h3>1.0</h3>

<p>Made sure that it worked with Internet Explorer 6 &amp; 7. Improved the innards of <code>.child()</code> to be more efficient.
Merged <code>.innerHTML()</code> and <code>.appendHTML()</code> together into the new <code>.html()</code> method. Provided a version minified
by YUI Compressor.</p>

<h3>Pre-1.0</h3>

<p>Initial pre-release of DOMBuilder.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 